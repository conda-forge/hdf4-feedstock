--- hdf/src/herr.h
+++ hdf/src/herr.h
@@ -106,7 +106,9 @@
 ;
 #else /* defined(H4_BUILT_AS_DYNAMIC_LIB) */
 # ifndef _H_ERR_MASTER_
-HDFERRPUBLIC
+extern __attribute__ ((visibility("default")))
+#else
+__attribute__ ((visibility("default")))
 # endif /* _H_ERR_MASTER_ */
 int32       error_top
 # ifdef _H_ERR_MASTER_

